{"version":3,"names":["_types","require","_utils","_DBListenerManager","TransactionFinalizer","DEFAULT_READ_CONNECTIONS","requestIdCounter","getRequestId","LockCallbacks","proxy","closeContextLock","dbName","id","releaseLock","global","onLockContextIsAvailable","lockId","setImmediate","record","timeout","clearTimeout","callback","_contextId","execute","sql","args","result","executeInContext","enhanceQueryResult","ex","console","error","setupOpen","QuickSQLite","open","options","numReadConnections","listenerManager","DBListenerManagerInternal","requestLock","type","hooks","Promise","resolve","reject","context","lockAcquired","res","lockReleased","timeoutMs","setTimeout","Error","readLock","ConcurrentLockType","READ","writeLock","WRITE","flushUpdates","wrapTransaction","defaultFinalizer","COMMIT","finalized","finalizedStatement","action","commit","rollback","wrapExecute","method","params","ROLLBACK","ex2","close","readTransaction","writeTransaction","delete","location","executeBatch","commands","attach","dbNameToAttach","alias","detach","loadFile","registerUpdateHook","registerListener","rawTableChange","registerTablesChangedHook","tablesUpdated"],"sourceRoot":"../../src","sources":["setup-open.ts"],"mappings":"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","ignoreList":[]}
