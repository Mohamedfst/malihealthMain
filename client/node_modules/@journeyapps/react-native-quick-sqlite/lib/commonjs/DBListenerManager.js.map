{"version":3,"names":["_tableUpdates","require","_types","_BaseObserver","DBListenerManager","BaseObserver","exports","DBListenerManagerInternal","constructor","options","updateBuffer","registerUpdateHook","dbName","update","handleTableUpdates","registerTransactionHook","eventType","TransactionEvent","ROLLBACK","transactionReverted","iterateListeners","l","writeTransaction","type","flushUpdates","length","groupedUpdates","reduce","grouping","table","updateGroup","push","batchedUpdate","rawUpdates","tables","Object","keys","tablesUpdated","notification","rawTableChange"],"sourceRoot":"../../src","sources":["DBListenerManager.ts"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAD,OAAA;AAOA,IAAAE,aAAA,GAAAF,OAAA;AAmCO,MAAMG,iBAAiB,SAASC,0BAAY,CAAa;AAAEC,OAAA,CAAAF,iBAAA,GAAAA,iBAAA;AAE3D,MAAMG,yBAAyB,SAASH,iBAAiB,CAAC;EAG/DI,WAAWA,CAAWC,OAAiC,EAAE;IACvD,KAAK,CAAC,CAAC;IAAC,KADYA,OAAiC,GAAjCA,OAAiC;IAErD,IAAI,CAACC,YAAY,GAAG,EAAE;IACtB,IAAAC,gCAAkB,EAAC,IAAI,CAACF,OAAO,CAACG,MAAM,EAAGC,MAAM,IAAK,IAAI,CAACC,kBAAkB,CAACD,MAAM,CAAC,CAAC;IACpF,IAAAE,qCAAuB,EAAC,IAAI,CAACN,OAAO,CAACG,MAAM,EAAGI,SAAS,IAAK;MAC1D,QAAQA,SAAS;QACf;AACR;AACA;AACA;QACQ,KAAKC,uBAAgB,CAACC,QAAQ;UAC5B,IAAI,CAACC,mBAAmB,CAAC,CAAC;UAC1B;MACJ;MAEA,IAAI,CAACC,gBAAgB,CAAEC,CAAC,IACtBA,CAAC,CAACC,gBAAgB,GAAG;QACnBC,IAAI,EAAEP;MACR,CAAC,CACH,CAAC;IACH,CAAC,CAAC;EACJ;EAEAQ,YAAYA,CAAA,EAAG;IACb,IAAI,CAAC,IAAI,CAACd,YAAY,CAACe,MAAM,EAAE;MAC7B;IACF;IAEA,MAAMC,cAAc,GAAG,IAAI,CAAChB,YAAY,CAACiB,MAAM,CAAC,CAACC,QAA8C,EAAEf,MAAM,KAAK;MAC1G,MAAM;QAAEgB;MAAM,CAAC,GAAGhB,MAAM;MACxB,MAAMiB,WAAW,GAAGF,QAAQ,CAACC,KAAK,CAAC,KAAKD,QAAQ,CAACC,KAAK,CAAC,GAAG,EAAE,CAAC;MAC7DC,WAAW,CAACC,IAAI,CAAClB,MAAM,CAAC;MACxB,OAAOe,QAAQ;IACjB,CAAC,EAAE,CAAC,CAAC,CAAC;IAEN,MAAMI,aAAwC,GAAG;MAC/CN,cAAc;MACdO,UAAU,EAAE,IAAI,CAACvB,YAAY;MAC7BwB,MAAM,EAAEC,MAAM,CAACC,IAAI,CAACV,cAAc;IACpC,CAAC;IACD,IAAI,CAAChB,YAAY,GAAG,EAAE;IACtB,IAAI,CAACU,gBAAgB,CAAEC,CAAC,IAAKA,CAAC,CAACgB,aAAa,GAAGL,aAAa,CAAC,CAAC;EAChE;EAEUb,mBAAmBA,CAAA,EAAG;IAC9B;IACA,IAAI,CAACT,YAAY,GAAG,EAAE;EACxB;EAEAI,kBAAkBA,CAACwB,YAAgC,EAAE;IACnD;IACA,IAAI,CAAClB,gBAAgB,CAAEC,CAAC,IAAKA,CAAC,CAACkB,cAAc,GAAG;MAAE,GAAGD;IAAa,CAAC,CAAC,CAAC;;IAErE;IACA,IAAI,CAAC5B,YAAY,CAACqB,IAAI,CAACO,YAAY,CAAC;EACtC;AACF;AAAChC,OAAA,CAAAC,yBAAA,GAAAA,yBAAA","ignoreList":[]}
