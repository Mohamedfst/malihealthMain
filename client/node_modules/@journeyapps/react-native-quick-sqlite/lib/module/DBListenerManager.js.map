{"version":3,"names":["registerTransactionHook","registerUpdateHook","TransactionEvent","BaseObserver","DBListenerManager","DBListenerManagerInternal","constructor","options","updateBuffer","dbName","update","handleTableUpdates","eventType","ROLLBACK","transactionReverted","iterateListeners","l","writeTransaction","type","flushUpdates","length","groupedUpdates","reduce","grouping","table","updateGroup","push","batchedUpdate","rawUpdates","tables","Object","keys","tablesUpdated","notification","rawTableChange"],"sourceRoot":"../../src","sources":["DBListenerManager.ts"],"mappings":";;AAAA,SAASA,uBAAuB,EAAEC,kBAAkB,QAAQ,iBAAiB;AAC7E,SAGEC,gBAAgB,QAGX,SAAS;AAChB,SAAuBC,YAAY,QAAQ,sBAAsB;AAmCjE,OAAO,MAAMC,iBAAiB,SAASD,YAAY,CAAa;AAEhE,OAAO,MAAME,yBAAyB,SAASD,iBAAiB,CAAC;EAG/DE,WAAWA,CAAWC,OAAiC,EAAE;IACvD,KAAK,CAAC,CAAC;IAAC,KADYA,OAAiC,GAAjCA,OAAiC;IAErD,IAAI,CAACC,YAAY,GAAG,EAAE;IACtBP,kBAAkB,CAAC,IAAI,CAACM,OAAO,CAACE,MAAM,EAAGC,MAAM,IAAK,IAAI,CAACC,kBAAkB,CAACD,MAAM,CAAC,CAAC;IACpFV,uBAAuB,CAAC,IAAI,CAACO,OAAO,CAACE,MAAM,EAAGG,SAAS,IAAK;MAC1D,QAAQA,SAAS;QACf;AACR;AACA;AACA;QACQ,KAAKV,gBAAgB,CAACW,QAAQ;UAC5B,IAAI,CAACC,mBAAmB,CAAC,CAAC;UAC1B;MACJ;MAEA,IAAI,CAACC,gBAAgB,CAAEC,CAAC,IACtBA,CAAC,CAACC,gBAAgB,GAAG;QACnBC,IAAI,EAAEN;MACR,CAAC,CACH,CAAC;IACH,CAAC,CAAC;EACJ;EAEAO,YAAYA,CAAA,EAAG;IACb,IAAI,CAAC,IAAI,CAACX,YAAY,CAACY,MAAM,EAAE;MAC7B;IACF;IAEA,MAAMC,cAAc,GAAG,IAAI,CAACb,YAAY,CAACc,MAAM,CAAC,CAACC,QAA8C,EAAEb,MAAM,KAAK;MAC1G,MAAM;QAAEc;MAAM,CAAC,GAAGd,MAAM;MACxB,MAAMe,WAAW,GAAGF,QAAQ,CAACC,KAAK,CAAC,KAAKD,QAAQ,CAACC,KAAK,CAAC,GAAG,EAAE,CAAC;MAC7DC,WAAW,CAACC,IAAI,CAAChB,MAAM,CAAC;MACxB,OAAOa,QAAQ;IACjB,CAAC,EAAE,CAAC,CAAC,CAAC;IAEN,MAAMI,aAAwC,GAAG;MAC/CN,cAAc;MACdO,UAAU,EAAE,IAAI,CAACpB,YAAY;MAC7BqB,MAAM,EAAEC,MAAM,CAACC,IAAI,CAACV,cAAc;IACpC,CAAC;IACD,IAAI,CAACb,YAAY,GAAG,EAAE;IACtB,IAAI,CAACO,gBAAgB,CAAEC,CAAC,IAAKA,CAAC,CAACgB,aAAa,GAAGL,aAAa,CAAC,CAAC;EAChE;EAEUb,mBAAmBA,CAAA,EAAG;IAC9B;IACA,IAAI,CAACN,YAAY,GAAG,EAAE;EACxB;EAEAG,kBAAkBA,CAACsB,YAAgC,EAAE;IACnD;IACA,IAAI,CAAClB,gBAAgB,CAAEC,CAAC,IAAKA,CAAC,CAACkB,cAAc,GAAG;MAAE,GAAGD;IAAa,CAAC,CAAC,CAAC;;IAErE;IACA,IAAI,CAACzB,YAAY,CAACkB,IAAI,CAACO,YAAY,CAAC;EACtC;AACF","ignoreList":[]}
