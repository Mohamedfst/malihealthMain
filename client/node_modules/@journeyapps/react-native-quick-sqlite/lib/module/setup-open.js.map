{"version":3,"names":["ConcurrentLockType","enhanceQueryResult","DBListenerManagerInternal","TransactionFinalizer","DEFAULT_READ_CONNECTIONS","requestIdCounter","getRequestId","LockCallbacks","proxy","closeContextLock","dbName","id","releaseLock","global","onLockContextIsAvailable","lockId","setImmediate","record","timeout","clearTimeout","callback","_contextId","execute","sql","args","result","executeInContext","ex","console","error","setupOpen","QuickSQLite","open","options","numReadConnections","listenerManager","requestLock","type","hooks","Promise","resolve","reject","context","lockAcquired","res","lockReleased","timeoutMs","setTimeout","Error","readLock","READ","writeLock","WRITE","flushUpdates","wrapTransaction","defaultFinalizer","COMMIT","finalized","finalizedStatement","action","commit","rollback","wrapExecute","method","params","ROLLBACK","ex2","close","readTransaction","writeTransaction","delete","location","executeBatch","commands","attach","dbNameToAttach","alias","detach","loadFile","registerUpdateHook","registerListener","rawTableChange","registerTablesChangedHook","tablesUpdated"],"sourceRoot":"../../src","sources":["setup-open.ts"],"mappings":"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","ignoreList":[]}
